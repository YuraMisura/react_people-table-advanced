(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{38:function(e,t,s){},40:function(e,t,s){},41:function(e,t,s){"use strict";s.r(t);var r=s(26),n=(s(36),s(37),s(8)),c=s(3),a=(s(38),s(9)),i=s.n(a),l=s(1),o=function(e){var t=e.isActive;return i()("navbar-item",{"has-background-grey-lighter":t})},j=function(){return Object(l.jsx)("nav",{"data-cy":"nav",className:"navbar is-fixed-top has-shadow",role:"navigation","aria-label":"main navigation",children:Object(l.jsx)("div",{className:"container",children:Object(l.jsxs)("div",{className:"navbar-brand",children:[Object(l.jsx)(n.c,{className:o,to:"/",children:"Home"}),Object(l.jsx)(n.c,{className:o,to:"/people",children:"People"})]})})})},d=function(){return Object(l.jsxs)("div",{"data-cy":"app",children:[Object(l.jsx)(j,{}),Object(l.jsx)("main",{className:"section",children:Object(l.jsx)("div",{className:"container",children:Object(l.jsx)(c.b,{})})})]})},b=function(){return Object(l.jsx)("h1",{className:"title",children:"Home Page"})},u=function(){return Object(l.jsx)("h1",{className:"title",children:"Page not found"})},h=s(4),x=s(6),O=s(0),p=s.n(O),m=s(10),f=s(5),v=s(24),N=s(27);function g(e,t){var s=new URLSearchParams(e.toString());return Object.entries(t).forEach((function(e){var t=Object(f.a)(e,2),r=t[0],n=t[1];null===n?s.delete(r):Array.isArray(n)?(s.delete(r),n.forEach((function(e){s.append(r,e)}))):s.set(r,n)})),s.toString()}var w=["children","params"],y=function(e){var t=e.children,s=e.params,r=Object(N.a)(e,w),c=Object(n.d)(),a=Object(f.a)(c,1)[0];return Object(l.jsx)(n.b,Object(v.a)(Object(v.a)({to:{search:g(a,s)}},r),{},{children:t}))},P=["16","17","18","19","20"],k=function(){var e=Object(n.d)(),t=Object(f.a)(e,2),s=t[0],r=t[1],c=s.get("query")||"",a=s.get("sex")||"",o=s.getAll("centuries")||[];return Object(l.jsxs)("nav",{className:"panel",children:[Object(l.jsx)("p",{className:"panel-heading",children:"Filters"}),Object(l.jsxs)("p",{className:"panel-tabs","data-cy":"SexFilter",children:[Object(l.jsx)(y,{params:{sex:null},className:i()({"is-active":!a}),children:"All"}),Object(l.jsx)(y,{params:{sex:"m"},className:i()({"is-active":"m"===a}),children:"Male"}),Object(l.jsx)(y,{params:{sex:"f"},className:i()({"is-active":"f"===a}),children:"Female"})]}),Object(l.jsx)("div",{className:"panel-block",children:Object(l.jsxs)("p",{className:"control has-icons-left",children:[Object(l.jsx)("input",{"data-cy":"NameFilter",type:"search",className:"input",placeholder:"Search",value:c,onChange:function(e){var t=g(s,{query:e.target.value||null});r(t)}}),Object(l.jsx)("span",{className:"icon is-left",children:Object(l.jsx)("i",{className:"fas fa-search","aria-hidden":"true"})})]})}),Object(l.jsx)("div",{className:"panel-block",children:Object(l.jsxs)("div",{className:"level is-flex-grow-1 is-mobile","data-cy":"CenturyFilter",children:[Object(l.jsx)("div",{className:"level-left",children:P.map((function(e){return Object(l.jsx)(y,{"data-cy":"century",params:(t=e,{centuries:o.includes(t)?o.filter((function(e){return t!==e})):[].concat(Object(m.a)(o),[t])}),className:i()("button mr-1",{"is-info":o.includes(e)}),children:e},e);var t}))}),Object(l.jsx)("div",{className:"level-right ml-4",children:Object(l.jsx)(y,{params:{centuries:[]},"data-cy":"centuryALL",className:i()("button is-success",{"is-outlined ":!!o.length}),children:"All"})})]})}),Object(l.jsx)("div",{className:"panel-block",children:Object(l.jsx)(y,{className:"button is-link is-outlined is-fullwidth",params:{centuries:[],sex:null,query:null},children:"Reset all filters"})})]})},L=(s(40),function(){return Object(l.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(l.jsx)("div",{className:"Loader__content"})})});var C=p.a.createContext({setInitialPeople:function(){},setIsLoading:function(){},setHasError:function(){},initialPeople:[],visiblePeople:[],isLoading:!1,hasError:""}),E=function(e){var t=e.children,s=Object(n.d)(),r=Object(f.a)(s,1)[0],c=Object(O.useState)([]),a=Object(f.a)(c,2),i=a[0],o=a[1],j=Object(O.useState)(!1),d=Object(f.a)(j,2),b=d[0],u=d[1],h=Object(O.useState)(""),x=Object(f.a)(h,2),p=x[0],v=x[1],N=function(e,t){var s=Object(m.a)(e),r=t.query,n=t.centuries,c=t.sex,a=t.sort,i=t.order;if(r){var l=r.toLowerCase().trim();s=e.filter((function(e){var t,s,r=e.name.toLowerCase(),n=null===(t=e.motherName)||void 0===t?void 0:t.toLowerCase(),c=null===(s=e.fatherName)||void 0===s?void 0:s.toLowerCase();return r.includes(l)||(null===n||void 0===n?void 0:n.includes(l))||(null===c||void 0===c?void 0:c.includes(l))}))}if(c&&(s=s.filter((function(e){return e.sex===c}))),n.length&&(s=s.filter((function(e){return n.includes(Math.ceil(e.born/100).toString())}))),a)switch(a){case"name":s.sort((function(e,t){return e.name.localeCompare(t.name)}));break;case"sex":s.sort((function(e,t){return e.sex.localeCompare(t.sex)}));break;case"born":s.sort((function(e,t){return e.born-t.born}));break;case"died":s.sort((function(e,t){return e.died-t.died}));break;default:throw new Error("There are no people matching the current search criteria")}return i&&s.reverse(),s}(i,{query:r.get("query")||"",centuries:r.getAll("centuries")||[],sex:r.get("sex")||"",sort:r.get("sort")||"",order:r.get("order")||""}),g={setInitialPeople:o,setIsLoading:u,initialPeople:i,visiblePeople:N,isLoading:b,hasError:p,setHasError:v};return Object(l.jsx)(C.Provider,{value:g,children:t})},S=function(e){var t=e.person,s=t.name,r=t.slug,c=t.sex;return Object(l.jsx)(n.b,{to:"../".concat(r),className:i()({"has-text-danger":"f"===c}),children:s})},F=function(e){var t=e.person,s=Object(O.useContext)(C).visiblePeople,r=Object(c.r)().slug,n=function(e){return s.find((function(t){return t.name===e}))||null},a=n(t.motherName),o=n(t.fatherName);return Object(l.jsxs)("tr",{"data-cy":"person",className:i()({"has-background-warning":r===t.slug}),children:[Object(l.jsx)("td",{children:Object(l.jsx)(S,{person:t})}),Object(l.jsx)("td",{children:t.sex}),Object(l.jsx)("td",{children:t.born}),Object(l.jsx)("td",{children:t.died}),Object(l.jsx)("td",{children:a?Object(l.jsx)(S,{person:a}):t.motherName||"-"}),Object(l.jsx)("td",{children:o?Object(l.jsx)(S,{person:o}):t.fatherName||"-"})]})},A=function(){var e=Object(n.d)(),t=Object(f.a)(e,1)[0],s=Object(O.useContext)(C).visiblePeople,r=t.get("sort")||"",c=t.get("order")||"",a=function(e){return r===e&&c?{sort:null,order:null}:r===e?{order:"desc"}:{sort:e,order:null}};return Object(l.jsxs)("table",{"data-cy":"peopleTable",className:"table is-striped is-hoverable is-narrow is-fullwidth",children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:Object(l.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Name",Object(l.jsx)(y,{params:a("name"),children:Object(l.jsx)("span",{className:"icon",children:Object(l.jsx)("i",{className:i()("fas",{"fa-sort":"name"!==r,"fa-sort-up":"name"===r&&!c,"fa-sort-down":"name"===r&&c})})})})]})}),Object(l.jsx)("th",{children:Object(l.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Sex",Object(l.jsx)(y,{params:a("sex"),children:Object(l.jsx)("span",{className:"icon",children:Object(l.jsx)("i",{className:i()("fas",{"fa-sort":"sex"!==r,"fa-sort-up":"sex"===r&&!c,"fa-sort-down":"sex"===r&&c})})})})]})}),Object(l.jsx)("th",{children:Object(l.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Born",Object(l.jsx)(y,{params:a("born"),children:Object(l.jsx)("span",{className:"icon",children:Object(l.jsx)("i",{className:i()("fas",{"fa-sort":"born"!==r,"fa-sort-up":"born"===r&&!c,"fa-sort-down":"born"===r&&c})})})})]})}),Object(l.jsx)("th",{children:Object(l.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:["Died",Object(l.jsx)(y,{params:a("died"),children:Object(l.jsx)("span",{className:"icon",children:Object(l.jsx)("i",{className:i()("fas",{"fa-sort":"died"!==r,"fa-sort-up":"died"===r&&!c,"fa-sort-down":"died"===r&&c})})})})]})}),Object(l.jsx)("th",{children:"Mother"}),Object(l.jsx)("th",{children:"Father"})]})}),Object(l.jsx)("tbody",{children:s.map((function(e){return Object(l.jsx)(F,{person:e},e.slug)}))})]})},I="https://mate-academy.github.io/react_people-table/api/people.json";function q(e){return new Promise((function(t){return setTimeout(t,e)}))}function H(){return T.apply(this,arguments)}function T(){return(T=Object(x.a)(Object(h.a)().mark((function e(){return Object(h.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",q(500).then((function(){return fetch(I)})).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=function(){var e=Object(O.useContext)(C),t=e.isLoading,s=e.hasError,r=e.visiblePeople,n=e.initialPeople,c=e.setIsLoading,a=e.setInitialPeople,i=e.setHasError;return Object(O.useEffect)((function(){var e=function(){var e=Object(x.a)(Object(h.a)().mark((function e(){var t;return Object(h.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),i(""),e.prev=2,e.next=5,H();case 5:t=e.sent,a(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),i("Something went wrong");case 12:return e.prev=12,c(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("h1",{className:"title",children:"People Page"}),Object(l.jsx)("div",{className:"block",children:Object(l.jsxs)("div",{className:"columns is-desktop is-flex-direction-row-reverse",children:[Object(l.jsx)("div",{className:"column is-7-tablet is-narrow-desktop",children:!!n.length&&!s&&!t&&Object(l.jsx)(k,{})}),Object(l.jsx)("div",{className:"column",children:Object(l.jsxs)("div",{className:"box table-container",children:[!s&&Object(l.jsx)(l.Fragment,{children:t?Object(l.jsx)(L,{}):Object(l.jsxs)(l.Fragment,{children:[!n.length&&Object(l.jsx)("p",{"data-cy":"noPeopleMessage",children:"There are no people on the server"}),!!n.length&&!r.length&&Object(l.jsx)("p",{children:"There are no people matching the current search criteria"}),!!r.length&&Object(l.jsx)(A,{})]})}),s&&Object(l.jsx)("p",{"data-cy":"peopleLoadingError",className:"has-text-danger",children:s})]})})]})})]})},M=function(){return Object(l.jsx)(n.a,{children:Object(l.jsx)(E,{children:Object(l.jsx)(c.e,{children:Object(l.jsxs)(c.c,{path:"/",element:Object(l.jsx)(d,{}),children:[Object(l.jsx)(c.c,{index:!0,element:Object(l.jsx)(b,{})}),Object(l.jsx)(c.c,{path:"/home",element:Object(l.jsx)(c.a,{to:"/",replace:!0})}),Object(l.jsx)(c.c,{path:"people",children:Object(l.jsx)(c.c,{path:":slug?",element:Object(l.jsx)(_,{})})}),Object(l.jsx)(c.c,{path:"*",element:Object(l.jsx)(u,{})})]})})})})};Object(r.createRoot)(document.getElementById("root")).render(Object(l.jsx)(M,{}))}},[[41,1,2]]]);
//# sourceMappingURL=main.3fb5e564.chunk.js.map